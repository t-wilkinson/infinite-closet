const product = {
  designer: 'gaala',
  slug: 'aimee',
}
// prettier-ignore
const cart = [ { id: 183, status: 'cart', message: null, size: 'XXS', date: null, rentalLength: 'short', address: null, paymentMethod: null, paymentIntent: null, shipment: null, product: { id: 12, name: 'Aimée ', slug: 'aimee', designer: 4, shortRentalPrice: 31, longRentalPrice: 52, retailPrice: 192, purchasePrice: 192, details: 'Look sharp in this sleek orange jumpsuit', stylistNotes: '72% acétate 28% polyester and Lining 100% viscose ', sizingNotes: null, categories_: 'jumpsuits,clothing', colors_: 'orange', fits_: '', occasions_: 'date-night,brunch,cocktail', styles_: 'straight-leg,quarter-sleeves,wrap-waist,v-neck', weather_: 'warm-weather', published_at: '2021-09-08T16:48:04.106Z', created_by: null, updated_by: 1, created_at: '2021-05-26T23:01:06.486Z', updated_at: '2021-09-08T16:48:06.115Z', sizes_: 'XXS,XS,S,M,L,XL', sizes: [ { id: 55, quantity: 1, size: 'XXS', details: null, sizeRange: null, units: null, hips: null, waist: null, bust: null, armpitWidth: null, lengthFromShoulder: null, }, { id: 56, quantity: 1, size: 'XS', details: null, sizeRange: null, units: null, hips: null, waist: null, bust: null, armpitWidth: null, lengthFromShoulder: null, }, { id: 57, quantity: 1, size: 'S', details: null, sizeRange: null, units: null, hips: null, waist: null, bust: null, armpitWidth: null, lengthFromShoulder: null, }, { id: 58, quantity: 1, size: 'M', details: null, sizeRange: null, units: null, hips: null, waist: null, bust: null, armpitWidth: null, lengthFromShoulder: null, }, { id: 59, quantity: 1, size: 'L', details: null, sizeRange: null, units: null, hips: null, waist: null, bust: null, armpitWidth: null, lengthFromShoulder: null, }, { id: 60, quantity: 1, size: 'XL', details: null, sizeRange: null, units: null, hips: null, waist: null, bust: null, armpitWidth: null, lengthFromShoulder: null, }, ], images: [ { id: 48, name: 'image_919d9a15-744f-4b6e-b275-1d5f57179709_1512x.jpg', alternativeText: '', caption: '', width: 1512, height: 2268, formats: { large: { ext: '.jpg', url: '/uploads/large_image_919d9a15_744f_4b6e_b275_1d5f57179709_1512x_52ce850600.jpg', hash: 'large_image_919d9a15_744f_4b6e_b275_1d5f57179709_1512x_52ce850600', mime: 'image/jpeg', name: 'large_image_919d9a15-744f-4b6e-b275-1d5f57179709_1512x.jpg', path: null, size: 78.34, width: 667, height: 1000, }, small: { ext: '.jpg', url: '/uploads/small_image_919d9a15_744f_4b6e_b275_1d5f57179709_1512x_52ce850600.jpg', hash: 'small_image_919d9a15_744f_4b6e_b275_1d5f57179709_1512x_52ce850600', mime: 'image/jpeg', name: 'small_image_919d9a15-744f-4b6e-b275-1d5f57179709_1512x.jpg', path: null, size: 26.41, width: 333, height: 500, }, medium: { ext: '.jpg', url: '/uploads/medium_image_919d9a15_744f_4b6e_b275_1d5f57179709_1512x_52ce850600.jpg', hash: 'medium_image_919d9a15_744f_4b6e_b275_1d5f57179709_1512x_52ce850600', mime: 'image/jpeg', name: 'medium_image_919d9a15-744f-4b6e-b275-1d5f57179709_1512x.jpg', path: null, size: 50.73, width: 500, height: 750, }, thumbnail: { ext: '.jpg', url: '/uploads/thumbnail_image_919d9a15_744f_4b6e_b275_1d5f57179709_1512x_52ce850600.jpg', hash: 'thumbnail_image_919d9a15_744f_4b6e_b275_1d5f57179709_1512x_52ce850600', mime: 'image/jpeg', name: 'thumbnail_image_919d9a15-744f-4b6e-b275-1d5f57179709_1512x.jpg', path: null, size: 4.43, width: 104, height: 156, }, }, hash: 'image_919d9a15_744f_4b6e_b275_1d5f57179709_1512x_52ce850600', ext: '.jpg', mime: 'image/jpeg', size: 315.24, url: '/uploads/image_919d9a15_744f_4b6e_b275_1d5f57179709_1512x_52ce850600.jpg', previewUrl: null, provider: 'local', provider_metadata: null, created_by: 1, updated_by: 1, created_at: '2021-05-12T17:22:59.976Z', updated_at: '2021-05-12T17:23:00.043Z', }, { id: 49, name: 'image_d35b0f1e-dcef-451c-94e1-e94067999dd0_1512x.jpg', alternativeText: '', caption: '', width: 1512, height: 2268, formats: { large: { ext: '.jpg', url: '/uploads/large_image_d35b0f1e_dcef_451c_94e1_e94067999dd0_1512x_ef8b0177aa.jpg', hash: 'large_image_d35b0f1e_dcef_451c_94e1_e94067999dd0_1512x_ef8b0177aa', mime: 'image/jpeg', name: 'large_image_d35b0f1e-dcef-451c-94e1-e94067999dd0_1512x.jpg', path: null, size: 99.1, width: 667, height: 1000, }, small: { ext: '.jpg', url: '/uploads/small_image_d35b0f1e_dcef_451c_94e1_e94067999dd0_1512x_ef8b0177aa.jpg', hash: 'small_image_d35b0f1e_dcef_451c_94e1_e94067999dd0_1512x_ef8b0177aa', mime: 'image/jpeg', name: 'small_image_d35b0f1e-dcef-451c-94e1-e94067999dd0_1512x.jpg', path: null, size: 30.1, width: 333, height: 500, }, medium: { ext: '.jpg', url: '/uploads/medium_image_d35b0f1e_dcef_451c_94e1_e94067999dd0_1512x_ef8b0177aa.jpg', hash: 'medium_image_d35b0f1e_dcef_451c_94e1_e94067999dd0_1512x_ef8b0177aa', mime: 'image/jpeg', name: 'medium_image_d35b0f1e-dcef-451c-94e1-e94067999dd0_1512x.jpg', path: null, size: 61.37, width: 500, height: 750, }, thumbnail: { ext: '.jpg', url: '/uploads/thumbnail_image_d35b0f1e_dcef_451c_94e1_e94067999dd0_1512x_ef8b0177aa.jpg', hash: 'thumbnail_image_d35b0f1e_dcef_451c_94e1_e94067999dd0_1512x_ef8b0177aa', mime: 'image/jpeg', name: 'thumbnail_image_d35b0f1e-dcef-451c-94e1-e94067999dd0_1512x.jpg', path: null, size: 4.45, width: 104, height: 156, }, }, hash: 'image_d35b0f1e_dcef_451c_94e1_e94067999dd0_1512x_ef8b0177aa', ext: '.jpg', mime: 'image/jpeg', size: 437.7, url: '/uploads/image_d35b0f1e_dcef_451c_94e1_e94067999dd0_1512x_ef8b0177aa.jpg', previewUrl: null, provider: 'local', provider_metadata: null, created_by: 1, updated_by: 1, created_at: '2021-05-12T17:23:00.058Z', updated_at: '2021-05-12T17:23:00.068Z', }, { id: 47, name: 'image_1eae001a-ae88-42af-9022-deb336fc0928_190x190_crop_center.jpg', alternativeText: '', caption: '', width: 190, height: 190, formats: { thumbnail: { ext: '.jpg', url: '/uploads/thumbnail_image_1eae001a_ae88_42af_9022_deb336fc0928_190x190_crop_center_e63c4041d6.jpg', hash: 'thumbnail_image_1eae001a_ae88_42af_9022_deb336fc0928_190x190_crop_center_e63c4041d6', mime: 'image/jpeg', name: 'thumbnail_image_1eae001a-ae88-42af-9022-deb336fc0928_190x190_crop_center.jpg', path: null, size: 6.38, width: 156, height: 156, }, }, hash: 'image_1eae001a_ae88_42af_9022_deb336fc0928_190x190_crop_center_e63c4041d6', ext: '.jpg', mime: 'image/jpeg', size: 7.43, url: '/uploads/image_1eae001a_ae88_42af_9022_deb336fc0928_190x190_crop_center_e63c4041d6.jpg', previewUrl: null, provider: 'local', provider_metadata: null, created_by: 1, updated_by: 1, created_at: '2021-05-12T17:22:58.879Z', updated_at: '2021-05-12T17:22:58.896Z', }, ], }, user: null, insurance: null, created_by: null, updated_by: null, created_at: '2021-09-08T16:48:25.247Z', updated_at: '2021-09-08T16:48:25.255Z', shippingDate: null, startDate: '2021-09-30', coupon: null, }, ]
const cartObject = cart.reduce((acc, order) => {
  acc[order.id] = order
  return acc
}, {})

context('Add To Cart', () => {
  it('Can add to old cart structure', () => {
    cy.login()
    cy.task('orders:clear')
    cy.setLocalStorage('cart', cartObject)
    cy.visit(`/shop/${product.designer}/${product.slug}`)

    // Select date
    cy.get('button[aria-label="Date selector"]').click()
    cy.get('button[aria-label="Date"]:not(:disabled)').first().click()

    cy.contains('Add to Cart').click()
    cy.location('pathname').should('eq', '/user/checkout')
  })

  it.skip('Can add to new cart structure', () => {
    cy.login()
    cy.task('orders:clear')
    cy.setLocalStorage('cart', cart)
    cy.visit(`/shop/${product.designer}/${product.slug}`)

    // Select date
    cy.get('button[aria-label="Date selector"]').click()
    cy.get('button[aria-label="Date"]:not(:disabled)').first().click()

    cy.contains('Add to Cart').click()
    cy.location('pathname').should('eq', '/user/checkout')
  })

  it.skip('Can view cart', () => {
    cy.login()
    cy.visit('/user/checkout')
  })
})
