version: '3.3'

services:
  frontend:
    image: node:14
    environment:
      FRONTEND_DOMAIN: infinitecloset.treywilkinson.com
      NEXT_PUBLIC_FRONTEND: 'https://infinitecloset.treywilkinson.com'
      NEXT_PUBLIC_BACKEND: 'https://api.infinitecloset.treywilkinson.com'
    command: yarn run develop
    volumes:
      - ../frontend:/app

  backend:
    image: node:14
    ports:
      - "127.0.0.1:8000:8000"
    environment:
      FRONTEND_DOMAIN: infinitecloset.treywilkinson.com
      BACKEND_DOMAIN: api.infinitecloset.treywilkinson.com
    command: yarn run develop:admin
    volumes:
      - ../backend:/app
